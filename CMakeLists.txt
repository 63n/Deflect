
# Copyright (c) 2013-2015, EPFL/Blue Brain Project
#                     Raphael Dumusc <raphael.dumusc@epfl.ch>
#                     Daniel Nachbaur <daniel.nachbaur@epfl.ch>

cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(Deflect)

list(APPEND CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/CMake
                              ${PROJECT_SOURCE_DIR}/CMake/common)
include(GitExternal)
include(SubProject)

set(VERSION_MAJOR "0")
set(VERSION_MINOR "4")
set(VERSION_PATCH "0")
set(VERSION_ABI 1)

set(DEFLECT_DESCRIPTION "The library to write applications for DisplayCluster")
set(DEFLECT_ISSUES_URL "https://github.com/BlueBrain/Deflect/issues")
set(DEFLECT_PACKAGE_URL "https://github.com/BlueBrain/Deflect/releases")
set(DEFLECT_DEPENDENT_LIBRARIES Boost)
include(Common)
include(FindPackages) # Generated by Buildyard and checked in

add_subdirectory(deflect)

add_subdirectory(apps)
add_subdirectory(tests)
add_subdirectory(doc)

include(DoxygenRule) # must be after all targets
include(PackageConfig)

set(CTEST_CUSTOM_WARNING_EXCEPTION ${CTEST_CUSTOM_WARNING_EXCEPTION}
  # http://public.kitware.com/Bug/view.php?id=10179
  "ld: warning: duplicate dylib")
include(CTest)
